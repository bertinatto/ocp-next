From 1f408312a26ced91489d03828944badf43d9e1d3 Mon Sep 17 00:00:00 2001
From: Fabio Bertinatto <fbertina@redhat.com>
Date: Mon, 24 Mar 2025 18:37:07 -0300
Subject: [PATCH] UPSTREAM: <carry>: Add openshift feature gates to
 kube-apiserver - inject openshift feature gates into pkg/features

---
 pkg/features/openshift_features.go | 11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)

diff --git a/pkg/features/openshift_features.go b/pkg/features/openshift_features.go
index 3ba55fdac90..1cc993bb5b7 100644
--- a/pkg/features/openshift_features.go
+++ b/pkg/features/openshift_features.go
@@ -1,6 +1,7 @@
 package features
 
 import (
+	"k8s.io/apimachinery/pkg/util/version"
 	"k8s.io/component-base/featuregate"
 )
 
@@ -9,12 +10,10 @@ var MinimumKubeletVersion featuregate.Feature = "MinimumKubeletVersion"
 
 // registerOpenshiftFeatures injects openshift-specific feature gates
 func registerOpenshiftFeatures() {
-	defaultKubernetesFeatureGates[RouteExternalCertificate] = featuregate.FeatureSpec{
-		Default:    false,
-		PreRelease: featuregate.Alpha,
+	defaultVersionedKubernetesFeatureGates[RouteExternalCertificate] = featuregate.VersionedSpecs{
+		{Version: version.MustParse("1.33"), Default: false, PreRelease: featuregate.Alpha},
 	}
-	defaultKubernetesFeatureGates[MinimumKubeletVersion] = featuregate.FeatureSpec{
-		Default:    false,
-		PreRelease: featuregate.Alpha,
+	defaultVersionedKubernetesFeatureGates[MinimumKubeletVersion] = featuregate.VersionedSpecs{
+		{Version: version.MustParse("1.33"), Default: false, PreRelease: featuregate.Alpha},
 	}
 }
-- 
2.49.0


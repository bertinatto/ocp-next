From f4602c341e47fb7c14e122ba7e3d6c56e024ba58 Mon Sep 17 00:00:00 2001
From: Fabio Bertinatto <fbertina@redhat.com>
Date: Wed, 2 Apr 2025 13:27:16 -0300
Subject: [PATCH] UPSTREAM: 131141: use a random service account name and
 crname

---
 test/e2e/node/kubelet_authz.go | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/test/e2e/node/kubelet_authz.go b/test/e2e/node/kubelet_authz.go
index 88972e6d30d..b32d5c4a80b 100644
--- a/test/e2e/node/kubelet_authz.go
+++ b/test/e2e/node/kubelet_authz.go
@@ -26,6 +26,7 @@ import (
 	v1 "k8s.io/api/core/v1"
 	rbacv1 "k8s.io/api/rbac/v1"
 	metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"
+	"k8s.io/apimachinery/pkg/util/rand"
 	"k8s.io/apiserver/pkg/authentication/serviceaccount"
 	"k8s.io/kubernetes/pkg/cluster/ports"
 	"k8s.io/kubernetes/test/e2e/feature"
@@ -58,8 +59,8 @@ var _ = SIGDescribe(feature.KubeletFineGrainedAuthz, func() {
 
 func runKubeletAuthzTest(ctx context.Context, f *framework.Framework, endpoint, authzSubresource string) string {
 	ns := f.Namespace.Name
-	saName := authzSubresource
-	crName := authzSubresource
+	saName := authzSubresource + rand.String(4)
+	crName := authzSubresource + rand.String(4)
 	verb := "get"
 	resource := "nodes"
 
-- 
2.49.0

